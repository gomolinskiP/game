config:
  target: "https://localhost:2000"
  processor: "./nextUser.cjs"
  phases:
    - name: "100 users"
      duration: 3000
      arrivalCount: 100
  defaults:
    headers:
      Content-Type: "application/json"
    https:
      rejectUnauthorized: false
      followRedirects: true
    cookie: true

scenarios:
  - name: "Login users"
    flow:
      - function: "nextUser"
      - post:
          url: "/login"
          json:
            username: "{{ username }}"
            password: "test1234"
          afterResponse: "storeSessionCookie"
      - think: 1

      - function: "connectSocket"
      - think: 30


